<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>FittingData and ModelFunctions · FittingObjectiveFunctions.jl</title><meta name="title" content="FittingData and ModelFunctions · FittingObjectiveFunctions.jl"/><meta property="og:title" content="FittingData and ModelFunctions · FittingObjectiveFunctions.jl"/><meta property="twitter:title" content="FittingData and ModelFunctions · FittingObjectiveFunctions.jl"/><meta name="description" content="Documentation for FittingObjectiveFunctions.jl."/><meta property="og:description" content="Documentation for FittingObjectiveFunctions.jl."/><meta property="twitter:description" content="Documentation for FittingObjectiveFunctions.jl."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.svg" alt="FittingObjectiveFunctions.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../">FittingObjectiveFunctions.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">FittingObjectiveFunctions</a></li><li class="is-active"><a class="tocitem" href>FittingData and ModelFunctions</a><ul class="internal"><li><a class="tocitem" href="#The-FittingData-struct"><span>The <code>FittingData</code> struct</span></a></li><li><a class="tocitem" href="#The-ModelFunctions-struct"><span>The <code>ModelFunctions</code> struct</span></a></li><li><a class="tocitem" href="#Additional-remarks"><span>Additional remarks</span></a></li></ul></li><li><span class="tocitem">Least squares objective</span><ul><li><a class="tocitem" href="../lsq_background/">Background</a></li><li><a class="tocitem" href="../lsq_implementation/">How to implement</a></li></ul></li><li><span class="tocitem">Posterior probability</span><ul><li><a class="tocitem" href="../posterior_background/">Background</a></li><li><a class="tocitem" href="../posterior_implementation/">How to implement</a></li></ul></li><li><span class="tocitem">Logarithmic posterior probability</span><ul><li><a class="tocitem" href="../log_posterior_background/">Background</a></li><li><a class="tocitem" href="../log_posterior_implementation/">How to implement</a></li></ul></li><li><a class="tocitem" href="../API/">API</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>FittingData and ModelFunctions</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>FittingData and ModelFunctions</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/Translational-Pain-Research/FittingObjectiveFunctions.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/Translational-Pain-Research/FittingObjectiveFunctions.jl/blob/main/docs/src/fitting_data.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="FittingData-and-ModelFunctions-objects"><a class="docs-heading-anchor" href="#FittingData-and-ModelFunctions-objects"><code>FittingData</code> and <code>ModelFunctions</code> objects</a><a id="FittingData-and-ModelFunctions-objects-1"></a><a class="docs-heading-anchor-permalink" href="#FittingData-and-ModelFunctions-objects" title="Permalink"></a></h1><p>For the construction of objective functions the data needs to be summarized in a <a href="../API/#FittingObjectiveFunctions.FittingData"><code>FittingData</code></a> object and information about the model needs to be summarized in a <a href="../API/#FittingObjectiveFunctions.ModelFunctions"><code>ModelFunctions</code></a> object.</p><h2 id="The-FittingData-struct"><a class="docs-heading-anchor" href="#The-FittingData-struct">The <code>FittingData</code> struct</a><a id="The-FittingData-struct-1"></a><a class="docs-heading-anchor-permalink" href="#The-FittingData-struct" title="Permalink"></a></h2><p>The <a href="../API/#FittingObjectiveFunctions.FittingData"><code>FittingData</code></a> struct has the following general constructor:</p><pre><code class="language-julia hljs">data = FittingData(X,Y,ΔY, distributions = distribution_functions)</code></pre><p>The resulting object has the following fields:</p><pre><code class="language-julia hljs">data.independent == X
data.dependent == Y
data.errors == ΔY
data.distributions == distributions_functions</code></pre><div class="admonition is-success"><header class="admonition-header">Tip: shortened constructors</header><div class="admonition-body"><p>If no measurement errors <code>ΔY</code> are available, the shortened constructor can be used:</p><pre><code class="language-julia hljs">FittingData(X,Y, distributions = distribution_functions)</code></pre><p>In this case, the default errors <code>ones(length(X))</code> are used (leading e.g. to the standard least squares objective function: <a href="../lsq_background/#Background:-LSQ">Background: LSQ</a>)</p></div></div><div class="admonition is-success"><header class="admonition-header">Tip: distributions</header><div class="admonition-body"><p>The optional <code>distributions</code> keyword is used to specify the likelihood distributions (see <a href="../posterior_background/#Background:-Posterior-probability">Background: Posterior probability</a>). If distributions are not specified explicitly, the constructor defaults to normal distributions.</p><p>The distributions can be specified as an array of functions, or a single function (the same distribution for all data points) with the signature <code>(y,m,Δy)</code>, where</p><ul><li><code>y</code> is the measured dependent variable</li><li><code>Δy</code> is the corresponding error</li><li><code>m</code> are the values that the model function returns for a given parameter</li></ul></div></div><h2 id="The-ModelFunctions-struct"><a class="docs-heading-anchor" href="#The-ModelFunctions-struct">The <code>ModelFunctions</code> struct</a><a id="The-ModelFunctions-struct-1"></a><a class="docs-heading-anchor-permalink" href="#The-ModelFunctions-struct" title="Permalink"></a></h2><p><a href="../API/#FittingObjectiveFunctions.ModelFunctions"><code>ModelFunctions</code></a> objects have the following general constructor:</p><pre><code class="language-julia hljs">model = ModelFunctions(model_function, partial_derivatives = [derivative_functions...])</code></pre><p>The resulting object has the following fields:</p><pre><code class="language-julia hljs">model.model == model_function
model.partials == [derivative_functions...]</code></pre><p>The model function (and the partial derivatives) must have the signature <code>(x,λ)</code>, where <code>x</code> is the independent variable and <code>λ</code> is the parameter (array).</p><div class="admonition is-success"><header class="admonition-header">Tip: Partial derivatives</header><div class="admonition-body"><p>The keyword <code>partials</code> is optional, but is required for analytical partial derivatives and analytical gradient functions. The partial derivatives w.r.t. the parameter are defined as array of functions.</p><p class="math-container">\[\text{m}(x,\lambda) = \lambda_1 x + \lambda_2 \ ,\quad \frac{\partial \text{m}(x,\lambda)}{\partial \lambda_1}  = x\ , \quad \frac{\partial \text{m}(x,\lambda)}{\partial \lambda_1} = 1\]</p><pre><code class="language-julia hljs">ModelFunctions((x,λ)-&gt; λ[1]*x + λ[2], partials = [(x,λ)-&gt; x, (x,λ)-&gt; 1])</code></pre></div></div><h2 id="Additional-remarks"><a class="docs-heading-anchor" href="#Additional-remarks">Additional remarks</a><a id="Additional-remarks-1"></a><a class="docs-heading-anchor-permalink" href="#Additional-remarks" title="Permalink"></a></h2><p>When a <a href="../API/#FittingObjectiveFunctions.FittingData"><code>FittingData</code></a>/<a href="../API/#FittingObjectiveFunctions.ModelFunctions"><code>ModelFunctions</code></a> object is created, some rudimentary consistency checks are done, e.g. that all arrays have the same lengths.</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; FittingData([1,2,3],[1,2],[1,1,1])</code><code class="nohighlight hljs ansi" style="display:block;">ERROR: DimensionMismatch: Arrays for independent data and dependent data do not have the same length.</code></pre><p>Since the objects are mutable, the same consistency checks are repeated before objective functions are created. However, it can be useful to make a comprehensive consistency check. For this, a representative parameter (array) is needed:</p><pre><code class="language-julia hljs">data = FittingData(X,Y)
model = ModelFunctions((x,λ)-&gt; λ*x)
consistency_check(data,model,1)</code></pre><p>If everything works, <code>nothing</code> is returned, i.e. nothing happens. However, in case of a problem, an error is thrown:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; consistency_check(data,model,&quot;1&quot;)</code><code class="nohighlight hljs ansi" style="display:block;">ERROR: &quot;Could not evaluate the model function.&quot;</code></pre><div class="admonition is-info"><header class="admonition-header">Mutability of objects</header><div class="admonition-body"><p>Both <a href="../API/#FittingObjectiveFunctions.FittingData"><code>FittingData</code></a> objects and <a href="../API/#FittingObjectiveFunctions.ModelFunctions"><code>ModelFunctions</code></a> objects are mutable for convenience, as they are not performance relevant (only their fields are). However, when objective functions are created, the object fields are copied and enclosed in the objective function, to avoid accidental mutation. </p><p>I.e. once an objective function is created, it does not change, even if the <a href="../API/#FittingObjectiveFunctions.FittingData"><code>FittingData</code></a>/<a href="../API/#FittingObjectiveFunctions.ModelFunctions"><code>ModelFunctions</code></a> objects are changed. To apply changes, a new objective function needs to be created. </p></div></div></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« FittingObjectiveFunctions</a><a class="docs-footer-nextpage" href="../lsq_background/">Background »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.7.0 on <span class="colophon-date" title="Thursday 12 September 2024 18:11">Thursday 12 September 2024</span>. Using Julia version 1.10.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
